<html>
	<head>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/brands.min.css" integrity="sha512-9YHSK59/rjvhtDcY/b+4rdnl0V4LPDWdkKceBl8ZLF5TB6745ml1AfluEU6dFWqwDw9lPvnauxFgpKvJqp7jiQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" href="leaflet.awesome-markers.css">
		<script src="leaflet.awesome-markers.min.js"></script>
		<style>
			body {
				padding: 0;
				margin: 0;
			}
			html, body, #map {
				height: 100%;
				width: 100vw;
				overflow:hidden;
			}
		</style>
	</head>
	<body>
		<script src="https://unpkg.com/leaflet-canvas-marker@0.2.0"></script>
		<div id="map"></div>
		<script>
			var geoMap = {
				"type": "Feature",
				"properties": { "gamearea": true },
				"geometry": {
					"coordinates": [
						[
							[
								-7.759579575670301,
								39.898807582114074
							],
							[
								-7.764115627294416,
								39.9060208303234
							],
							[
								-7.769945453760869,
								39.91185368641388
							],
							[
								-7.774634662005326,
								39.91389506871067
							],
							[
								-7.7800842823968,
								39.91651953389902
							],
							[
								-7.7862943149370665,
								39.92050484279471
							],
							[
								-7.791363729254698,
								39.92837741480443
							],
							[
								-7.795636128748924,
								39.92961397886249
							],
							[
								-7.799854998238317,
								39.93002956833874
							],
							[
								-7.803636490094178,
								39.930159826618166
							],
							[
								-7.807205648998718,
								39.93002956833874
							],
							[
								-7.809277210140976,
								39.92938361516808
							],
							[
								-7.810754239022458,
								39.9279886670017
							],
							[
								-7.811360508910379,
								39.92681628159294
							],
							[
								-7.811777487787019,
								39.92518422016475
							],
							[
								-7.812891434223033,
								39.92130167438944
							],
							[
								-7.814075533501843,
								39.91801894410351
							],
							[
								-7.814403833259139,
								39.91727946572511
							],
							[
								-7.814424424820572,
								39.915899404679465
							],
							[
								-7.816664000885865,
								39.912317022206295
							],
							[
								-7.816971923395421,
								39.91052363065585
							],
							[
								-7.816967916899944,
								39.90848795427266
							],
							[
								-7.8175030040042035,
								39.90654920180971
							],
							[
								-7.817833734656429,
								39.90531323622643
							],
							[
								-7.817279845906228,
								39.90410150201515
							],
							[
								-7.8165409543576345,
								39.90039436479296
							],
							[
								-7.81410732837503,
								39.896687227570766
							],
							[
								-7.810928149159693,
								39.89235318455313
							],
							[
								-7.804924412556005,
								39.89163099774714
							],
							[
								-7.791951463573952,
								39.88570561300472
							],
							[
								-7.784197019347928,
								39.88304229971369
							],
							[
								-7.7769423197107415,
								39.882762978409716
							],
							[
								-7.76984513966454,
								39.88392997040533
							],
							[
								-7.764142048557062,
								39.88577770512896
							],
							[
								-7.760421961234982,
								39.889647280671355
							],
							[
								-7.758565692807309,
								39.89414044838273
							],
							[
								-7.759579575670301,
								39.898807582114074
							]
						]
					],
					"type": "Polygon"
				}
			};
			
			var geoNonPlayArea = {
				"type": "Feature",
				"properties": {},
				"geometry": {
					"type": "Polygon",
					"coordinates": [
						[
							[
								-7.791546521261579,
								39.90589080246406
							],
							[
								-7.791833269697173,
								39.905879995946556
							],
							[
								-7.792117256319379,
								39.90584768047686
							],
							[
								-7.792395745922931,
								39.90579416730076
							],
							[
								-7.792666056262148,
								39.9057199718283
							],
							[
								-7.792925583891607,
								39.90562580866823
							],
							[
								-7.793171829246768,
								39.905512584743505
							],
							[
								-7.793402420722754,
								39.90538139055387
							],
							[
								-7.793615137519094,
								39.905233489670415
							],
							[
								-7.793807931030264,
								39.905070306562735
							],
							[
								-7.793978944575897,
								39.9048934128766
							],
							[
								-7.794126531280606,
								39.9047045122942
							],
							[
								-7.794249269931275,
								39.904505424122895
							],
							[
								-7.794345978659222,
								39.904298065770796
							],
							[
								-7.794415726315633,
								39.904084434278
							],
							[
								-7.794457841431003,
								39.90386658708146
							],
							[
								-7.794471918672587,
								39.90364662219887
							],
							[
								-7.794457822738027,
								39.90342665802246
							],
							[
								-7.794415689648041,
								39.903208812917306
							],
							[
								-7.794345925426131,
								39.90299518482074
							],
							[
								-7.794249202178401,
								39.90278783103919
							],
							[
								-7.794126451611652,
								39.902588748437125
							],
							[
								-7.793978856052499,
								39.902399854208625
							],
							[
								-7.793807837054326,
								39.902222967416876
							],
							[
								-7.793615041702059,
								39.90205979147911
							],
							[
								-7.793402326746816,
								39.90191189776558
							],
							[
								-7.793171740723371,
								39.90178071047033
							],
							[
								-7.792925504222652,
								39.9016674928995
							],
							[
								-7.792665988509273,
								39.901573335308676
							],
							[
								-7.792395692689838,
								39.90149914440676
							],
							[
								-7.792117219651788,
								39.90144563462689
							],
							[
								-7.791833251004197,
								39.90141332124859
							],
							[
								-7.791546521261579,
								39.90140251543727
							],
							[
								-7.791259791518962,
								39.90141332124859
							],
							[
								-7.7909758228713715,
								39.90144563462689
							],
							[
								-7.790697349833321,
								39.90149914440676
							],
							[
								-7.790427054013886,
								39.901573335308676
							],
							[
								-7.790167538300507,
								39.9016674928995
							],
							[
								-7.789921301799788,
								39.90178071047033
							],
							[
								-7.789690715776343,
								39.90191189776558
							],
							[
								-7.7894780008211,
								39.90205979147911
							],
							[
								-7.7892852054688335,
								39.902222967416876
							],
							[
								-7.78911418647066,
								39.902399854208625
							],
							[
								-7.788966590911507,
								39.902588748437125
							],
							[
								-7.788843840344758,
								39.90278783103919
							],
							[
								-7.788747117097028,
								39.90299518482074
							],
							[
								-7.788677352875118,
								39.903208812917306
							],
							[
								-7.7886352197851325,
								39.90342665802246
							],
							[
								-7.7886211238505725,
								39.90364662219887
							],
							[
								-7.7886352010921565,
								39.90386658708146
							],
							[
								-7.788677316207526,
								39.904084434278
							],
							[
								-7.788747063863937,
								39.904298065770796
							],
							[
								-7.788843772591884,
								39.904505424122895
							],
							[
								-7.7889665112425535,
								39.9047045122942
							],
							[
								-7.789114097947262,
								39.9048934128766
							],
							[
								-7.789285111492895,
								39.905070306562735
							],
							[
								-7.789477905004065,
								39.905233489670415
							],
							[
								-7.789690621800405,
								39.90538139055387
							],
							[
								-7.789921213276391,
								39.905512584743505
							],
							[
								-7.790167458631552,
								39.90562580866823
							],
							[
								-7.790426986261011,
								39.9057199718283
							],
							[
								-7.790697296600228,
								39.90579416730076
							],
							[
								-7.790975786203779,
								39.90584768047686
							],
							[
								-7.7912597728259865,
								39.905879995946556
							],
							[
								-7.791546521261579,
								39.90589080246406
							]
						]
					]
				}
			}

			var markers = L.layerGroup();

			
			
			var markersLetters = [];

			var osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 18,
				attribution: '© OpenStreetMap'
			});
			var googleHybrid = L.tileLayer('http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}', {
				maxZoom: 18,
				subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],
				attribution: '© GoogleMaps'
			});
			var googleSat = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
				maxZoom: 18,
				subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],
				attribution: '© GoogleMaps'
			});
			var map = L.map('map', {
				center: [39.903709300754876, -7.791813546839541],
				zoom: 15,
				layers: [osm, googleHybrid, googleSat]
			});

			var baseLayers = {
				'Sattelite': googleSat,
				'Hybrid': googleHybrid,
				'Street': osm
			};

			var layerControl = L.control.layers(baseLayers, overlays).addTo(map);
			
			var ciLayer = L.canvasIconLayer({}).addTo(map);
			
			var icon = L.icon({
				iconUrl: 'images/USAC_LOGO_TRANSPARENT.svg',
				iconSize: [500, 500],
				iconAnchor: [100, 90]
			});

			//var marker = L.marker([39.92711498594037, -7.745790481567384], {icon: icon});
			//markersLetters.push(marker);
			
			var lat1 = 39.8825;
			var lat2 = 39.9309;
			var lng1 = -7.8180;
			var lng2 = -7.7580;
			// and longitude: 
			var iconlat = 39.929788881405194 + 0.0022
			var iconlng = -7.816493511199952;

			var lng = lng1
			for (i = 0; i < 21; i++) {
				var icon = L.icon({
					iconUrl: 'images/'+(i+1)+'.svg',
					iconSize: [20, 18],
					iconAnchor: [10, 9]
				});
				
				var marker = L.marker([iconlat, iconlng], {icon: icon});
				
				if (i < 20) {
			    		markersLetters.push(marker);
				}
				
				var objGeo = {
					"type": "Feature",
					"properties": {},
					"geometry": {
						"coordinates": [
							[
								lng,
								lat1
							],
							[
								lng,
								lat2
							]
						],
						"type": "LineString"
					}
				};
				L.geoJSON(objGeo).addTo(map);
				lng = lng + 0.0030;
				iconlng = iconlng + 0.0030;
			}


			var lat = lat1;
			var alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
			var iconlat = 39.88359397660328;
			var iconlng = -7.816514968872071 - 0.0030;

			for (i = 0; i < 23; i++) {
				var icon = L.icon({
					iconUrl: 'images/'+alphabet.charAt(21-i)+'.svg',
					iconSize: [20, 18],
					iconAnchor: [10, 9]
				});
				
				var marker = L.marker([iconlat, iconlng], {icon: icon});
				
				if (i < 22) {
			    		markersLetters.push(marker);
				}

				var objGeo = {
					"type": "Feature",
					"properties": {},
					"geometry": {
						"coordinates": [
							[
								lng1,
								lat
							],
							[
								lng2,
								lat
							]
						],
						"type": "LineString"
					}
				};
				L.geoJSON(objGeo).addTo(map);
				lat = lat + 0.0022;
				iconlat = iconlat + 0.0022;
			}
			
			L.geoJSON(geoMap, {
				style: function (feature) {
					if (feature.properties.gamearea) {
						return { color: "#ff0000", opacity: 0.1 };
					}
					else {
						return { color: "#808080", opacity: 1 };
					}
				}
			}).addTo(map);

			L.geoJSON(geoNonPlayArea, {
				style: function (feature) {
					if (feature.properties.gamearea) {
						return { color: "#ff0000", opacity: 0.1 };
					}
					else {
						return { color: "#808080", opacity: 1 };
					}
				}
			}).addTo(map);
			
			var redMarker = L.AwesomeMarkers.icon({
				//icon: 'fa-solid fa-jug-detergent',
				markerColor: 'red'
			});
			
			var blueMarker = L.AwesomeMarkers.icon({
				//icon: 'fa-regular fa-star',
				markerColor: 'blue'
			});
			
			var blackMarker = L.AwesomeMarkers.icon({
				//icon: 'fa-brands fa-redhat',
				markerColor: 'black'
			});
			
			//L.marker([39.9082, -7.8023], {icon: redMarker}).bindPopup('Medronho').addTo(markers);
			//L.marker([39.9210, -7.7951], {icon: blueMarker}).bindPopup('Anti-medronho').addTo(markers);
			//L.marker([39.8889, -7.7794], {icon: blackMarker}).bindPopup('Máfia').addTo(markers);
			
			
			
			map.addLayer(markers);

			var overlays = {
				'Markers': markers
			};
			// and longitude: 
			map.on('click', function(e) {
				var coord = e.latlng;
				var lat = coord.lat;
				var lng = coord.lng;
				console.log("You clicked the map at latitude: " + lat + " and longitude: " + lng);
			});
			ciLayer.addLayers(markersLetters);
		</script>
	</body>
</html>
